<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Potwierdzenie Zamówienia</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 2em;
      }
      .success {
        color: green;
        font-size: 1.5em;
        margin-bottom: 1em;
      }
      .summary {
        margin-bottom: 2em;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 0.5em;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <div class="success">Zamówienie złożone pomyślnie!</div>

    <div class="summary">
      <h2>Podsumowanie zamówienia:</h2>
      <table id="order-table">
        <thead>
          <tr>
            <th>Produkt</th>
            <th>Ilość</th>
            <th>Cena</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <td colspan="2"><strong>Łącznie</strong></td>
            <td id="total"></td>
          </tr>
        </tfoot>
      </table>
    </div>

    <a href="/" onclick="localStorage.removeItem('cart')">Powrót do zakupów</a>

    <script>
      const order = JSON.parse(localStorage.getItem('lastOrder'));
      const tableBody = document.querySelector('#order-table tbody');
      const totalCell = document.getElementById('total');
      let total = 0;

      order.forEach((item) => {
        const row = document.createElement('tr');
        row.innerHTML = `
        <td>${item.name}</td>
        <td>${item.quantity}</td>
        <td>${(item.price.main * item.quantity).toFixed(2)} zł</td>
      `;
        tableBody.appendChild(row);
        total += item.price.main * item.quantity;
      });

      totalCell.textContent = total.toFixed(2) + ' zł';

      localStorage.removeItem('cart');
    </script>
  </body>
</html>
